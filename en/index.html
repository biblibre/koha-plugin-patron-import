

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; PatronImport  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Create new import" href="create_import.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            PatronImport
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_import.html">Create new import</a></li>
<li class="toctree-l1"><a class="reference internal" href="define_mappings.html">Define mappings</a></li>
<li class="toctree-l1"><a class="reference internal" href="protected_erasables_fields.html">Protected and erasables fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="default_values.html">Default values</a></li>
<li class="toctree-l1"><a class="reference internal" href="exclusions.html">Exclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="deletions.html">Deletions</a></li>
<li class="toctree-l1"><a class="reference internal" href="debarments.html">Debarments</a></li>
<li class="toctree-l1"><a class="reference internal" href="extented_attributes.html">Extended attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-ons.html">Add-ons</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">PatronImport</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h1>
<p>This plugin allows you to import patrons from a CSV file or by a LDAP server.
Several mappings are available to define how to import the data.</p>
<p>The creation of add-ons is possible in order to extend the capabilities of the plugin during the import process.</p>
<section id="before-starting">
<h2>Before starting<a class="headerlink" href="#before-starting" title="Link to this heading"></a></h2>
<p>Before configuring the plugin, here are the basic (and <strong>important</strong>) elements that you need to prepare.</p>
<section id="from-which-source">
<h3>From which source ?<a class="headerlink" href="#from-which-source" title="Link to this heading"></a></h3>
<p>CSV or LDAP</p>
<p>Ideally the csv should be encoded in utf8. The first line of the CSV must be the <strong>column headers</strong>.</p>
<p>For a LDAP import, this additional informations are needed:</p>
<ul class="simple">
<li><p><strong>host and port</strong> of the LDAP to be requested (IP address or URL)</p></li>
<li><p>an authorized <strong>account</strong> (distinguished name) and <strong>password</strong> to read the directory if the anonymous bind is not allowed</p></li>
<li><p>a <strong>search base</strong> that is kind a sub-directory where the accounts to import are</p></li>
<li><p>a <strong>search filter</strong> which allow the LDAP search to select only the wanted entries (optional)</p></li>
</ul>
</section>
<section id="field-mappings">
<h3>Field mappings<a class="headerlink" href="#field-mappings" title="Link to this heading"></a></h3>
<p>Create a mapping table between source fields and Koha fields.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Source field</p></th>
<th class="head"><p>Koha field</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>surname</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>categorycode</p></td>
</tr>
<tr class="row-even"><td><p>mail</p></td>
<td><p>email</p></td>
</tr>
</tbody>
</table>
<p>If a source field is named the same way than the corresponding Koha field, the mapping is implicit and does not need to be defined in the configuration page.
Unless the field value must correspond to a certain value or be transformed.</p>
</section>
<section id="value-mappings">
<h3>Value mappings<a class="headerlink" href="#value-mappings" title="Link to this heading"></a></h3>
<p>Define the values that need to be transformed before being imported into Koha, and provide a transformation table for each field that requires it.
Particularly for values that must correspond to an authorized value in Koha (e.g. categorycode, branchcode).</p>
<p>The transformation process allows regular expressions such as “strict equals”, “starts with”, “contains”.
For very specific treatments, an add-on must be drawn up.</p>
</section>
<section id="matching-point">
<h3>Matching point<a class="headerlink" href="#matching-point" title="Link to this heading"></a></h3>
<p>One or more fields to be used for deduplicate patrons.
It is preferable to use unique fields (userid, cardnumber). Extended attributes can be used.</p>
</section>
<section id="default-values-optional-but-recommended">
<h3>Default values (optional but recommended)<a class="headerlink" href="#default-values-optional-but-recommended" title="Link to this heading"></a></h3>
<p>Set default for certain fields if they are empty (or invalid for categorycode and branchcode).
The definition of default values for <strong>categorycode and branchcode</strong> should be systematic.</p>
</section>
<section id="automating">
<h3>Automating<a class="headerlink" href="#automating" title="Link to this heading"></a></h3>
<p>Automation involves adding the import to a <a class="reference internal" href="tools.html#tools"><span class="std std-ref">cronjob</span></a>. This requires some important information:</p>
<ul class="simple">
<li><p><strong>frequency</strong> (each hour/day/week/month ?)</p></li>
<li><p><strong>time</strong> important to avoid processing during hours of use/opening</p></li>
<li><p><strong>where</strong> the CSV file will be uploaded on the server (not for LDAP)</p></li>
<li><p><strong>naming</strong> of CSV file may contain a date part which will be replaced by the current date during import</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pay attention to the import time. A file could be uploaded at 11:50 pm and imported at 00:30 am the day after.</p>
</div>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_import.html">Create new import</a><ul>
<li class="toctree-l2"><a class="reference internal" href="create_import.html#csv-settings">CSV Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_import.html#configuration-handler">Configuration handler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="define_mappings.html">Define mappings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="define_mappings.html#fields-mappings">Fields mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="define_mappings.html#value-mappings">Value mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="define_mappings.html#transformation-plugins">Transformation plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="define_mappings.html#matching-point">Matching point</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="protected_erasables_fields.html">Protected and erasables fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="protected_erasables_fields.html#protected-fields">Protected fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="protected_erasables_fields.html#erasable-fields">Erasable fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="default_values.html">Default values</a></li>
<li class="toctree-l1"><a class="reference internal" href="exclusions.html">Exclusions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="exclusions.html#create-a-rule">Create a rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="exclusions.html#add-fields">Add fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deletions.html">Deletions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deletions.html#create-a-rule">Create a rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="deletions.html#add-fields">Add fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="debarments.html">Debarments</a></li>
<li class="toctree-l1"><a class="reference internal" href="extented_attributes.html">Extended attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="logs.html">Logs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logs.html#runs">Runs</a></li>
<li class="toctree-l2"><a class="reference internal" href="logs.html#debug-options">Debug options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tools.html#cronjob">Cronjob</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#launcher">Launcher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="add-ons.html">Add-ons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="add-ons.html#create-an-add-on">Create an add-on</a></li>
<li class="toctree-l2"><a class="reference internal" href="add-ons.html#installation">Installation</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="create_import.html" class="btn btn-neutral float-right" title="Create new import" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BibLibre.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>